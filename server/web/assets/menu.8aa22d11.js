import{d as H,A as k,B as V,z as K,l as O,r,D as P,o as f,m as U,s as E,x as e,a as t,w as o,G as i,c as C,J as Q,F as W,n as X,L as D,q as m}from"./vendor.df9bfe02.js";import{u as Y}from"./index.48e608ee.js";const Z={class:"menu-manage"},ee={class:"query-form"},ue=m("\u67E5\u8BE2"),le=m("\u91CD\u7F6E"),te={class:"base-table"},oe={class:"action"},ae=m("\u521B\u5EFA "),ne=m("\u65B0\u589E"),de=m("\u7F16\u8F91"),re=m("\u5220\u9664"),me=E("span",null,"\u9ED8\u8BA4\u4E3A\u4E00\u7EA7\u83DC\u5355",-1),se=m("\u83DC\u5355"),pe=m("\u6309\u94AE"),ie=m("\u6B63\u5E38"),_e=m("\u505C\u7528"),ce={class:"dialog-footer"},fe=m("\u53D6\u6D88"),Fe=m("\u786E\u5B9A"),Ee=H({setup(Ce){let y=k([]),a=V({parentId:[null],menuType:1,menuState:1});const x=V([{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName",width:180},{label:"\u56FE\u6807",prop:"icon"},{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType",formatter(n,u,d){return{"1":"\u83DC\u5355","2":"\u6309\u94AE"}[d]}},{label:"\u6743\u9650\u6807\u8BC6",prop:"menuCode"},{label:"\u8DEF\u7531\u5730\u5740",prop:"path"},{label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{label:"\u83DC\u5355\u72B6\u6001",prop:"menuState",width:90,formatter(n,u,d){return{"1":"\u6B63\u5E38","2":"\u505C\u7528"}[d]}},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",formatter(n,u,d){return Y.formatDate(new Date(d))}}]),F=V({menuState:1});let I=V({menuName:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:["blur"]},{min:2,max:10,message:"\u957F\u5EA6\u57282-8\u4E2A\u5B57\u7B26",trigger:"blur"}]}),_=k(!1),h=k("");const{proxy:p}=K();async function v(){try{let n=await p.$api.getMenuList(F);y.value=n}catch(n){console.error(n)}}O(()=>{v()});function g(n){p.$refs.form.resetFields()}function $(n,u){_.value=!0,h.value="add",n===2&&(a.parentId=[...u.parentId,u._id].filter(d=>d))}function L(n){_.value=!0,h.value="edit",p.$nextTick(()=>{a=n})}async function q(n){await p.$api.menuSubmit({id:n,action:"delete"}),p.$message.success("\u5220\u9664\u6210\u529F"),v()}function M(){p.$refs.dialogForm.validate(async n=>{if(n){let u={params:a,action:h.value};await p.$api.menuSubmit(u),_.value=!1,p.$message.success("\u64CD\u4F5C\u6210\u529F"),g(p.$refs.dialogForm),p.$api.getMenuList()}})}function z(){_.value=!1,g()}return(n,u)=>{const d=r("el-input"),s=r("el-form-item"),A=r("el-option"),R=r("el-select"),c=r("el-button"),T=r("el-form"),w=r("el-table-column"),G=r("el-table"),J=r("el-cascader"),B=r("el-radio"),N=r("el-radio-group"),j=r("el-dialog"),b=P("has");return f(),U("div",Z,[E("div",ee,[e(T,{inline:!0,ref:"form",model:t(F)},{default:o(()=>[e(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:o(()=>[e(d,{modelValue:t(F).menuName,"onUpdate:modelValue":u[0]||(u[0]=l=>t(F).menuName=l),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(s,{label:"\u83DC\u5355\u72B6\u6001",prop:"menustate"},{default:o(()=>[e(R,{placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u72B6\u6001",modelValue:t(F).menustate,"onUpdate:modelValue":u[1]||(u[1]=l=>t(F).menustate=l)},{default:o(()=>[e(A,{value:1,label:"\u6B63\u5E38"}),e(A,{value:2,label:"\u505C\u7528"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[i((f(),C(c,{type:"primary",onClick:v},{default:o(()=>[ue]),_:1})),[[b,"menu-query"]]),e(c,{onClick:u[2]||(u[2]=l=>g(t(F)))},{default:o(()=>[le]),_:1})]),_:1})]),_:1},8,["model"])]),E("div",te,[E("div",oe,[i((f(),C(c,{type:"primary",onClick:u[3]||(u[3]=l=>$(1))},{default:o(()=>[ae]),_:1})),[[b,"menu-create"]])]),e(G,{data:t(y),"row-key":"_id","tree-props":{children:"children"}},{default:o(()=>[e(w,{type:"selection",width:"55"}),(f(!0),U(W,null,X(t(x),l=>(f(),C(w,{key:l.prop,prop:l.prop,label:l.label,formatter:l.formatter,width:l.width},null,8,["prop","label","formatter","width"]))),128)),e(w,{label:"\u64CD\u4F5C",width:"220"},{default:o(l=>[i((f(),C(c,{onClick:S=>$(2,l.row),size:"small",type:"primary"},{default:o(()=>[ne]),_:2},1032,["onClick"])),[[b,"menu-create"]]),i((f(),C(c,{onClick:S=>L(l.row),size:"small"},{default:o(()=>[de]),_:2},1032,["onClick"])),[[b,"menu-edit"]]),i((f(),C(c,{type:"danger",onClick:S=>q(l.row._id),size:"small"},{default:o(()=>[re]),_:2},1032,["onClick"])),[[b,"menu-delete"]])]),_:1})]),_:1},8,["data"])]),e(j,{title:"\u83DC\u5355\u65B0\u589E",modelValue:t(_),"onUpdate:modelValue":u[12]||(u[12]=l=>Q(_)?_.value=l:_=l)},{footer:o(()=>[E("span",ce,[e(c,{onClick:z},{default:o(()=>[fe]),_:1}),e(c,{type:"primary",onClick:M},{default:o(()=>[Fe]),_:1})])]),default:o(()=>[e(T,{ref:"dialogForm",model:t(a),"label-width":"100px",rules:t(I)},{default:o(()=>[e(s,{label:"\u7236\u7EA7\u83DC\u5355",prop:"parentId"},{default:o(()=>[e(J,{modelValue:t(a).parentId,"onUpdate:modelValue":u[4]||(u[4]=l=>t(a).parentId=l),options:t(y),props:{checkStrictly:!0,value:"_id",label:"menuName"},clearable:""},null,8,["modelValue","options"]),me]),_:1}),e(s,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:o(()=>[e(N,{modelValue:t(a).menuType,"onUpdate:modelValue":u[5]||(u[5]=l=>t(a).menuType=l)},{default:o(()=>[e(B,{label:1},{default:o(()=>[se]),_:1}),e(B,{label:2},{default:o(()=>[pe]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:o(()=>[e(d,{modelValue:t(a).menuName,"onUpdate:modelValue":u[6]||(u[6]=l=>t(a).menuName=l),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(e(s,{label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:o(()=>[e(d,{modelValue:t(a).icon,"onUpdate:modelValue":u[7]||(u[7]=l=>t(a).icon=l),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807"},null,8,["modelValue"])]),_:1},512),[[D,t(a).menuType==1]]),i(e(s,{label:"\u8DEF\u7531\u5730\u5740",prop:"path"},{default:o(()=>[e(d,{modelValue:t(a).path,"onUpdate:modelValue":u[8]||(u[8]=l=>t(a).path=l),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1},512),[[D,t(a).menuType==1]]),i(e(s,{label:"\u6743\u9650\u6807\u8BC6",prop:"menuCode"},{default:o(()=>[e(d,{modelValue:t(a).menuCode,"onUpdate:modelValue":u[9]||(u[9]=l=>t(a).menuCode=l),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u6807\u8BC6"},null,8,["modelValue"])]),_:1},512),[[D,t(a).menuType==2]]),i(e(s,{label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[e(d,{modelValue:t(a).component,"onUpdate:modelValue":u[10]||(u[10]=l=>t(a).component=l),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"])]),_:1},512),[[D,t(a).menuType==1]]),i(e(s,{label:"\u83DC\u5355\u72B6\u6001",prop:"menuState"},{default:o(()=>[e(N,{modelValue:t(a).menuState,"onUpdate:modelValue":u[11]||(u[11]=l=>t(a).menuState=l)},{default:o(()=>[e(B,{label:1},{default:o(()=>[ie]),_:1}),e(B,{label:2},{default:o(()=>[_e]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[D,t(a).menuType==1]])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{Ee as default};
