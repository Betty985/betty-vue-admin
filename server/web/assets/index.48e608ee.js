var P=Object.defineProperty;var v=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&y(e,r,t[r]);if(v)for(var r of v(t))S.call(t,r)&&y(e,r,t[r]);return e};import{d as T,u as B,r as $,o as f,c as g,w as N,a as V,K as C,b as E,e as M,E as _,f as x,g as F,h as U,i as j,I as L,j as z}from"./vendor.df9bfe02.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}};K();const q=T({setup(e){const t=B();return(r,s)=>{const o=$("router-view");return f(),g(o,null,{default:N(({Component:a})=>[V(t).meta.zyh?(f(),g(C,{key:0},[(f(),g(E(a)))],1024)):(f(),g(E(a),{key:1}))]),_:1})}}}),H="modulepreload",A={},J="/",i=function(t,r){return!r||r.length===0?t():Promise.all(r.map(s=>{if(s=`${J}${s}`,s in A)return;A[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":H,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((R,O)=>{u.addEventListener("load",R),u.addEventListener("error",O)})})).then(()=>t())},I="production",W={development:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/c1c302e8baed9894c48c17e4738c092e/api"},test:{baseApi:"//test.futurefe.com/api",mockApi:"https://www.fastmock.site/mock/c1c302e8baed9894c48c17e4738c092e/api"},prod:{baseApi:"//futurefe.com/api",mockApi:"https://www.fastmock.site/mock/c1c302e8baed9894c48c17e4738c092e/api"}};var c=h({namespace:"manager",env:I,mock:!1},W[I]),l={setItem(e,t){let r=this.getStorage();r[e]=t,window.localStorage.setItem(c.namespace,JSON.stringify(r))},getItem(e){return this.getStorage()[e]||{}},clearItem(e){let t=this.getStorage();delete t[e],window.localStorage.setItem(c.namespace,JSON.stringify(t))},clearAll(){window.localStorage.clear()},getStorage(){return JSON.parse(window.localStorage.getItem(c.namespace)||"{}")}};const k="token \u8BA4\u8BC1\u5931\u8D25,\u8BF7\u91CD\u65B0\u767B\u5F55",w="\u7F51\u7EDC\u8BF7\u6C42\u5F02\u5E38,\u8BF7\u7A0D\u540E\u91CD\u8BD5",p=M.create({baseURL:c.baseApi,timeout:8e3});p.interceptors.request.use(e=>{const t=e.headers,{token:r}=l.getItem("userInfo");return t.Authorization||(t.Authorization="snow "+r),e});p.interceptors.response.use(e=>{const{code:t,data:r,msg:s}=e.data;return t===200?r:t===50001?(_.error(k),setTimeout(()=>{d.push("/login")},5e4),Promise.reject(k)):(_.error(s||w),Promise.reject(s||w))});function n(e){e.method=e.method||"get",e.method.toLowerCase()==="get"&&(e.params=e.data);let t=c.mock;return typeof e.mock!="undefined"&&(t=e.mock),c.env==="prod"?p.defaults.baseURL=c.baseApi:p.defaults.baseURL=t?c.mockApi:c.baseApi,p(e)}["get","post","put","delete","pathch"].forEach(e=>{n[e]=(t,r,s)=>n(h({url:t,data:r,method:e},s))});var b={login(e){return n({url:"/users/login",method:"post",data:e})},noticeCount(e){return n({url:"/leave/count",method:"get",data:{},mock:!0})},getMenuList(e){return n({url:"/menu/list",method:"get",data:e})},getUserList(e){return n({url:"/users/list",method:"get",data:e})},getUserAllList(){return n({url:"/users/all/list",method:"get",data:{}})},userDel(e){return n({url:"/users/delete",method:"post",data:e})},getRoleAllList(){return n({url:"/roles/allList",method:"get",data:{}})},getRoleList(e){return n({url:"/roles/list",method:"get",data:e})},getDeptList(){return n({url:"/dept/list",method:"get",data:{}})},deptOperate(e){return n({url:"/dept/operate",method:"post",data:e,mock:!0})},userSubmit(e){return n({url:"/users/operate",method:"post",data:e})},menuSubmit(e){return n({url:"/menu/operate",method:"post",data:e})},roleOperate(e){return n({url:"/roles/operate",method:"post",data:e})},updatePermission(e){return n({url:"/roles/ update/permission",method:"post",data:e})},getPermissionList(){return n({url:"/users/getPermissionList",method:"get",data:{}})},getApplyList(e){return n({url:"/leave/list",method:"get",data:e,mock:!1})},leaveOperate(e){return n({url:"/leave/operate",method:"post",data:e,mock:!1})},leaveApprove(e){return n({url:"/leave/approve",method:"post",data:e,mock:!1})}},Y={formatDate(e,t){let r=t||"yyyy-MM-dd hh:mm:ss";if(/y+/.test(r)){let o=/y+/.exec(r)[0];r=r.replace(o,e.getFullYear())}const s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(let o in s)if(new RegExp(`(${o})`).test(r)){const a=s[o]+"";let u=new RegExp(`(${o})`).exec(r)[0];r=r.replace(u,u.length==1?a:("00"+a).substring(a.length))}return r},generateRoute(e){let t=[];const r=s=>{for(;s.length;){let o=s.pop();o.action&&t.push({name:o.component,path:o.path,meta:{title:o.menuName},component:o.component}),o.children&&!o.action&&(t.push({name:o.component,path:o.path,meta:{title:o.menuName},component:o.component}),r(o.children))}};return r(e),t}};const G=[{path:"/",redirect:"/welcome"},{name:"home",path:"/home",meta:{title:"\u9996\u9875"},component:()=>i(()=>import("./Home.ae1a6169.js"),["assets/Home.ae1a6169.js","assets/Home.ebebb636.css","assets/vendor.df9bfe02.js"]),children:[{name:"welcome",path:"/welcome",component:()=>i(()=>import("./Welcome.7b4fb8b7.js"),["assets/Welcome.7b4fb8b7.js","assets/Welcome.85ea5f13.css","assets/vendor.df9bfe02.js"]),meta:{title:"\u6B22\u8FCE\u4F7F\u7528",zyh:!0}},{name:"user",path:"/system/user",component:()=>i(()=>import("./user.63ae46b3.js"),["assets/user.63ae46b3.js","assets/vendor.df9bfe02.js"]),meta:{title:"\u7528\u6237\u7BA1\u7406"}},{name:"menu",path:"/system/menu",component:()=>i(()=>import("./menu.8aa22d11.js"),["assets/menu.8aa22d11.js","assets/vendor.df9bfe02.js"]),meta:{title:"\u83DC\u5355\u7BA1\u7406"}},{name:"role",path:"/system/role",component:()=>i(()=>import("./Role.ca55318f.js"),["assets/Role.ca55318f.js","assets/vendor.df9bfe02.js"]),meta:{title:"\u89D2\u8272\u7BA1\u7406"}},{name:"dept",path:"/system/dept",component:()=>i(()=>import("./Dept.40efc6b8.js"),["assets/Dept.40efc6b8.js","assets/vendor.df9bfe02.js"]),meta:{title:"\u90E8\u95E8\u7BA1\u7406"}}]},{path:"/login",name:"login",component:()=>i(()=>import("./login.152045e4.js"),["assets/login.152045e4.js","assets/login.d24c715b.css","assets/vendor.df9bfe02.js"]),meta:{public:!0,title:"\u767B\u5F55\u9875"}},{path:"/test",name:"test",component:()=>i(()=>import("./index.60f77ad9.js"),["assets/index.60f77ad9.js","assets/index.a99a4b73.css","assets/vendor.df9bfe02.js"])},{path:"/404",name:"404",meta:{title:"\u9875\u9762\u4E0D\u5B58\u5728"},component:()=>i(()=>import("./index.12023490.js"),["assets/index.12023490.js","assets/index.37b35bbd.css","assets/vendor.df9bfe02.js"])}],d=x({history:F(),routes:G,strict:!0,scrollBehavior(e,t,r){return new Promise(s=>{if(r)return r;if(t.meta.saveSrollTop){const o=document.documentElement.scrollTop||document.body.scrollTop;s({left:0,top:o})}})}});function Q(e){return Object.keys(e).length<=0}d.beforeEach((e,t,r)=>{let s=l.getItem("userInfo"),o=Q(s)?"":s.token;if(!e.meta.public&&!o)return _({message:"\u8BF7\u5148\u767B\u5F55",type:"error"}),r("/login");X(),d.hasRoute(e.name)?(document.title=e.meta.title,r()):r("/404")});async function X(){if((l.getItem("userInfo")||{}).token){console.log(1);const{menuList:t}=await b.getPermissionList();Y.generateRoute(t).map(s=>{let o=`./../views/${s.component}.vue`;s.component=()=>i(()=>import(o),[]),d.addRoute("system",s)})}}var Z={saveUserInfo(e,t){e.userInfo=t,l.setItem("userInfo",t)},saveUserMenu(e,t){e.menuList=t,l.setItem("menuList",t)},saveUserAction(e,t){e.actionList=t,l.setItem("actionList",t)}};const ee={userInfo:l.getItem("userInfo")||{},menuList:l.getItem("menuList")||{},actionList:l.getItem("actionList")||{}};var te=U({state:ee,mutations:Z});let m=j(q);Object.keys(L).forEach(e=>{m.component(e,L[e])});m.directive("has",{beforeMount:(e,t)=>{}});m.use(z,{size:"small"});m.config.globalProperties.$api=b;m.config.globalProperties.$storage=l;m.config.globalProperties.$request=n;m.use(d);m.use(te);m.mount("#app");export{d as r,Y as u};
