import{d as M,k as q,l as B,r as o,o as l,c as f,w as n,m as v,n as L,a as r,F as x,p as D,q as h,t as _,s,v as C,x as t,y as H,z as P,A as g,B as S}from"./vendor.df9bfe02.js";import{r as j}from"./index.48e608ee.js";var G="/assets/logo.03d6d6da.png";const J={key:1},K=M({setup(y){let u=q().currentRoute.value.matched;return B(()=>{}),(i,d)=>{const m=o("router-link"),e=o("el-breadcrumb-item"),b=o("el-breadcrumb");return l(),f(b,{"separator-icon":r(D)},{default:n(()=>[(l(!0),v(x,null,L(r(u),(p,w)=>(l(),f(e,{key:p.path},{default:n(()=>[w==0?(l(),f(m,{key:0,to:"/welcome"},{default:n(()=>[h(_(p.meta.title),1)]),_:2},1024)):(l(),v("span",J,_(p.meta.title),1))]),_:2},1024))),128))]),_:1},8,["separator-icon"])}}}),O=M({props:{userMenu:{type:Array,default(){return[]}}},setup(y){return(c,u)=>{const i=o("tree-menu",!0),d=o("el-sub-menu"),m=o("el-menu-item");return l(!0),v(x,null,L(y.userMenu,e=>(l(),v(x,null,[e.children&&e.children.length>0&&e.children[0].menuType===1?(l(),f(d,{key:e._id,index:e.path},{title:n(()=>[s("i",{class:C(e.icon)},null,2),s("span",null,_(e.menuName),1)]),default:n(()=>[t(i,{userMenu:e.children},null,8,["userMenu"])]),_:2},1032,["index"])):e.menuType===1?(l(),f(m,{index:e.path,key:e._id},{default:n(()=>[h(_(e.menuName),1)]),_:2},1032,["index"])):H("",!0)],64))),256)}}});const Q={class:"basic-layout"},W=s("div",{class:"logo"},[s("img",{src:G}),s("span",null,"Manager")],-1),X={class:"nav-top"},Y={class:"nav-left"},Z={class:"bread"},ee={class:"user-info"},te={class:"user-link"},oe=h("\u9000\u51FA"),ne={class:"wrapper"},re=M({setup(y){let{proxy:c}=P(),u=g(!1),i=g(3),d=g([]),m=g(location.hash.slice(1)),e=S(c.$store.state.userInfo);function b(){u.value=!u.value}function p(a){a==="logout"&&(c.$store.commit("saveUserInfo",""),e={},j.push("/login"))}async function w(){try{const a=await c.$api.noticeCount();i.value=a}catch(a){console.error(a)}}async function A(){try{const{menuList:a,actionList:$}=await c.$api.getPermissionList();d.value=a,c.$store.commit("saveUserMenu",a),c.$store.commit("saveUserAction",$)}catch(a){console.error(a)}}return B(()=>{w(),A()}),(a,$)=>{const F=o("el-menu"),I=o("fold"),k=o("el-icon"),V=o("bell"),E=o("el-badge"),R=o("right"),N=o("el-dropdown-item"),T=o("el-dropdown-menu"),U=o("el-dropdown"),z=o("router-view");return l(),v("div",Q,[s("div",{class:C(["nav-side",r(u)?"fold":"unfold"])},[W,t(F,{"default-active":r(m),"background-color":"#001529","text-color":"#fff",router:"",collapse:r(u),class:"nav-menu"},{default:n(()=>[t(O,{userMenu:r(d)},null,8,["userMenu"])]),_:1},8,["default-active","collapse"])],2),s("div",{class:C(["content-right",r(u)?"fold":"unfold"])},[s("div",X,[s("div",Y,[s("div",{class:"menu-fold",onClick:b},[t(k,null,{default:n(()=>[t(I)]),_:1})]),s("div",Z,[t(K)])]),s("div",ee,[t(E,{"is-dot":r(i)>0,class:"notice",type:"danger"},{default:n(()=>[t(k,null,{default:n(()=>[t(V)]),_:1})]),_:1},8,["is-dot"]),t(U,{onCommand:p,class:"user-drop"},{dropdown:n(()=>[t(T,null,{default:n(()=>[t(N,{command:"email"},{default:n(()=>[h("\u90AE\u7BB1\uFF1A"+_(r(e).userEmail),1)]),_:1}),t(N,{command:"logout"},{default:n(()=>[oe]),_:1})]),_:1})]),default:n(()=>[s("span",te,[h(_(r(e).userName)+" ",1),t(k,null,{default:n(()=>[t(R)]),_:1})])]),_:1})])]),s("div",ne,[t(z)])],2)])}}});export{re as default};
