针对模块抽象定义一套标准的数据结构

- async await 一定要成对出现
- 为用户分配角色，为角色分配权限
- ctx 获取上下文的句柄

# 权限

基于 RBAC（role-based access control)模型

- 用户 角色 权限

## 权限分类

分为菜单权限，数据权限，按钮权限

做法：统一各个系统的权限，搭建权限中心、用户系统，实现单点登录，统一权限分配

## 工作流

部分或整体业务实现计算机环境下的自动化。

七要素：
角色，场景，节点，环节，必要信息，通知，操作

### 使用工作流的场景或系统

OA HR ERP CRM

# koa-jwt

JSON Web Token (JWT)是一个开放标准(RFC 7519)，它定义了一种紧凑的、自包含的方式，用于作为 JSON 对象在各方之间安全地传输信息。该信息可以被验证和信任，因为它是数字签名的。

koa-jwt 主要作用是路由权限控制，控制哪些路由需要 jwt 验证，哪些接口不需要验证：

```js
app.use(
  koajwt({
    secret: "miyao",
    // 默认是Bearer <token>
    // 还可以用getToken和getCookie
    getToken: function (ctx, opts) {
      const { authorization } = ctx.header;
      if (authorization && authorization.split(" ")[0] === "snow") {
        return authorization.split(" ")[1];
      }
    },
  }).unless({
    path: [/\/users\/login/],
  })
);
```
